(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{5769:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(7876),r=s(4232);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1);async function n(){try{let e=await fetch("/api/alerts"),s=await e.json();t(s.alerts||[])}catch(e){console.error("Failed to fetch alerts:",e)}}async function i(e){try{await fetch("/api/alerts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),n()}catch(e){console.error("Failed to mark alert as read:",e)}}(0,r.useEffect)(()=>{n();let e=setInterval(n,6e4);return()=>clearInterval(e)},[]);let o=e.filter(e=>!e.isRead);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>l(!s),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),o.length>0&&(0,a.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:o.length})]}),s&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===e.length?(0,a.jsx)("p",{className:"p-4 text-gray-500 text-center",children:"No alerts"}):e.map(e=>(0,a.jsx)("div",{className:"p-4 border-b border-gray-100 ".concat(e.isRead?"bg-gray-50":"bg-white"),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat("critical"===e.severity?"bg-red-600":"warning"===e.severity?"bg-yellow-500":"bg-blue-500")})}),(0,a.jsxs)("div",{className:"ml-3 w-full",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,a.jsxs)("div",{className:"mt-1 flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()}),!e.isRead&&(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark as read"})]})]})]})},e.id))})]})]})}function n(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(null);async function o(e){var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;let r=new FormData;r.append("file",a),t(!0),i(null);try{let e=await fetch("/api/parse-statement",{method:"POST",body:r}),t=await e.json();if(!t.success)throw Error(t.error||"Failed to parse statement");l(t.transactions)}catch(e){i(e instanceof Error?e.message:"Failed to upload file")}finally{t(!1)}}return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Bank Statement"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Statement File"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, CSV, XLS, or XLSX"})]}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:".pdf,.csv,.xls,.xlsx",onChange:o,disabled:e})]})})]}),e&&(0,a.jsx)("div",{className:"flex justify-center my-4",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}),n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4",children:n}),s.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h3",{className:"text-md font-medium text-gray-900 mb-3",children:["Found ",s.length," Investment Transactions"]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",e.amount.toLocaleString()]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("credit"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type})})]},t))})]})})]})]})}let i=["Stock","Mutual Fund","PPF","NPS","FD","Gold","Crypto"];function o(e){let{isOpen:t,onClose:s,onAdd:l}=e,[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({name:"",type:"Stock",ticker:"",amount:"",costBasis:"",date:new Date().toISOString().split("T")[0]});if(!t)return null;async function x(e){e.preventDefault(),o(!0);try{let e={...d,amount:parseFloat(d.amount),costBasis:parseFloat(d.costBasis),totalCost:parseFloat(d.amount)*parseFloat(d.costBasis),date:new Date(d.date),lastUpdated:new Date};await l(e),c({name:"",type:"Stock",ticker:"",amount:"",costBasis:"",date:new Date().toISOString().split("T")[0]}),s()}catch(e){alert("Failed to add investment: "+(e instanceof Error?e.message:"Unknown error"))}finally{o(!1)}}return(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Investment"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.name,onChange:e=>c({...d,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Apple Inc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsx)("select",{required:!0,value:d.type,onChange:e=>c({...d,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticker Symbol"}),(0,a.jsx)("input",{type:"text",value:d.ticker,onChange:e=>c({...d,ticker:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., AAPL"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,a.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:d.amount,onChange:e=>c({...d,amount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Number of units"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Unit"}),(0,a.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:d.costBasis,onChange:e=>c({...d,costBasis:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Price per unit"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:d.date,onChange:e=>c({...d,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400",children:n?"Adding...":"Add Investment"}),(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})})}var d=s(252),c=s(9550),x=s(8720),m=s(747),u=s(1874),h=s(6320),p=s(4758),g=s(2333),f=s(4354),j=s(8834),b=s(8615),y=s(5965),v=s(6167),w=s(6520),N=s(2460),A=s(2039),k=s(1428),S=s(510),C=s(3694),L=s(1897),P=s(9299),F=s(7307),D=s(2643),T=s(8638),I=s(1982),R=s(5846),V=s(275),E=s(1045);let B=()=>{let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(5e3),[c,x]=(0,r.useState)(12),[m,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/portfolio/analysis");if(!e.ok)throw Error("Failed to fetch portfolio analysis");let s=await e.json();t(s)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}};return s?(0,a.jsx)(y.A,{}):n?(0,a.jsx)(v.A,{severity:"error",children:n}):e?(0,a.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:3,p:3},children:[(0,a.jsx)(w.A,{children:(0,a.jsx)(N.A,{children:(0,a.jsxs)(A.A,{children:[(0,a.jsx)(k.A,{variant:"h5",gutterBottom:!0,children:"Portfolio Overview"}),(0,a.jsxs)(w.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,a.jsxs)(w.A,{sx:{flex:"1 1 50%",maxWidth:{md:"25%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Total Value"}),(0,a.jsxs)(k.A,{variant:"h6",children:["₹",e.totalValue.toLocaleString()]})]}),(0,a.jsxs)(w.A,{sx:{flex:"1 1 50%",maxWidth:{md:"25%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Total Cost"}),(0,a.jsxs)(k.A,{variant:"h6",children:["₹",e.totalCost.toLocaleString()]})]}),(0,a.jsxs)(w.A,{sx:{flex:"1 1 50%",maxWidth:{md:"25%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Overall Return"}),(0,a.jsxs)(k.A,{variant:"h6",color:e.overallReturn>=0?"success.main":"error.main",children:["₹",e.overallReturn.toLocaleString()," (",e.overallReturnPercentage.toFixed(2),"%)"]})]})]})]})})}),(0,a.jsxs)(w.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[(0,a.jsx)(w.A,{sx:{flex:1},children:(0,a.jsx)(N.A,{children:(0,a.jsxs)(A.A,{children:[(0,a.jsx)(k.A,{variant:"h5",gutterBottom:!0,children:"Portfolio Insights"}),e.insights.overexposure.length>0&&(0,a.jsxs)(w.A,{mb:2,children:[(0,a.jsxs)(k.A,{variant:"subtitle1",color:"warning.main",children:[(0,a.jsx)(T.A,{})," Concentration Risks"]}),(0,a.jsx)(S.A,{children:e.insights.overexposure.map((e,t)=>(0,a.jsx)(C.Ay,{children:(0,a.jsx)(L.A,{primary:e})},t))})]}),e.insights.rebalancingSuggestions.length>0&&(0,a.jsxs)(w.A,{mb:2,children:[(0,a.jsxs)(k.A,{variant:"subtitle1",color:"info.main",children:[(0,a.jsx)(I.A,{})," Rebalancing Suggestions"]}),(0,a.jsx)(S.A,{children:e.insights.rebalancingSuggestions.map((e,t)=>(0,a.jsx)(C.Ay,{children:(0,a.jsx)(L.A,{primary:e})},t))})]}),(0,a.jsx)(P.A,{sx:{my:2}}),(0,a.jsxs)(w.A,{children:[(0,a.jsxs)(k.A,{variant:"subtitle1",color:"success.main",children:[(0,a.jsx)(R.A,{})," Top Performers"]}),(0,a.jsx)(S.A,{children:e.insights.topPerformers.map((e,t)=>(0,a.jsx)(C.Ay,{children:(0,a.jsx)(L.A,{primary:e})},t))})]}),(0,a.jsxs)(w.A,{children:[(0,a.jsxs)(k.A,{variant:"subtitle1",color:"error.main",children:[(0,a.jsx)(V.A,{})," Underperformers"]}),(0,a.jsx)(S.A,{children:e.insights.underperformers.map((e,t)=>(0,a.jsx)(C.Ay,{children:(0,a.jsx)(L.A,{primary:e})},t))})]})]})})}),(0,a.jsx)(w.A,{sx:{flex:1},children:(0,a.jsx)(N.A,{children:(0,a.jsxs)(A.A,{children:[(0,a.jsxs)(k.A,{variant:"h5",gutterBottom:!0,children:[(0,a.jsx)(E.A,{})," What-if Simulator"]}),(0,a.jsxs)(w.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[(0,a.jsx)(w.A,{sx:{width:"100%",flex:{xs:"1 1 100%",sm:"1 1 50%"}},children:(0,a.jsx)(F.A,{fullWidth:!0,label:"Monthly Investment (₹)",type:"number",value:o,onChange:e=>d(Number(e.target.value)),InputProps:{inputProps:{min:0}}})}),(0,a.jsx)(w.A,{sx:{width:"100%",flex:{xs:"1 1 100%",sm:"1 1 50%"}},children:(0,a.jsx)(F.A,{fullWidth:!0,label:"Duration (months)",type:"number",value:c,onChange:e=>x(Number(e.target.value)),InputProps:{inputProps:{min:1,max:120}}})}),(0,a.jsx)(w.A,{sx:{width:"100%"},children:(0,a.jsx)(D.A,{variant:"contained",color:"primary",onClick:()=>{let t=Math.pow(1.12,1/12)-1,s=(null==e?void 0:e.totalValue)||0,a=[];for(let e=1;e<=c;e++)s=s*(1+t)+o,a.push({month:e,value:s});let r=((null==e?void 0:e.totalValue)||0)+o*c,l=s-r;u({futureValue:s,totalInvestment:r,expectedReturn:l,monthlyBreakdown:a})},fullWidth:!0,children:"Calculate Future Value"})})]}),m&&(0,a.jsxs)(w.A,{mt:3,children:[(0,a.jsx)(k.A,{variant:"h6",gutterBottom:!0,children:"Simulation Results"}),(0,a.jsxs)(w.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,a.jsxs)(w.A,{sx:{width:"100%",flex:{xs:"1 1 100%",sm:"1 1 33%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Future Value"}),(0,a.jsxs)(k.A,{variant:"body1",children:["₹",m.futureValue.toLocaleString()]})]}),(0,a.jsxs)(w.A,{sx:{width:"100%",flex:{xs:"1 1 100%",sm:"1 1 33%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Total Investment"}),(0,a.jsxs)(k.A,{variant:"body1",children:["₹",m.totalInvestment.toLocaleString()]})]}),(0,a.jsxs)(w.A,{sx:{width:"100%",flex:{xs:"1 1 100%",sm:"1 1 33%"}},children:[(0,a.jsx)(k.A,{variant:"subtitle2",children:"Expected Return"}),(0,a.jsxs)(k.A,{variant:"body1",color:"success.main",children:["₹",m.expectedReturn.toLocaleString()]})]})]})]})]})})})]})]}):null};var O=s(7271);let W=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#f97316","#14b8a6"],_=["Stock","Mutual Fund","PPF","NPS","FD","Gold","Crypto"];function M(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[y,v]=(0,r.useState)("All"),[w,N]=(0,r.useState)(""),[A,k]=(0,r.useState)("name"),[S,C]=(0,r.useState)("desc"),[L,P]=(0,r.useState)(!1),[F,D]=(0,r.useState)(null),[T,I]=(0,r.useState)(!1),[R,V]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){let e=await fetch("/api/portfolio");t((await e.json()).investments||[]),i(!1)}()},[]);let U=e.reduce((e,t)=>e+(t.currentValue||0),0),X=function(e){let t={};for(let s of e)t[s.type]=(t[s.type]||0)+(s.currentValue||0);return Object.entries(t).map(e=>{let[t,s]=e;return{type:t,value:s}})}(e),q=function(e){let t={};for(let s of e){let e=new Date(s.date||new Date),a="".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"));t[a]=(t[a]||0)+(s.amount||0)}return Object.entries(t).map(e=>{let[t,s]=e;return{month:t,value:s}})}(e),K=e.filter(e=>{var t;let s=e.type===y,a=""===w||e.name.toLowerCase().includes(w.toLowerCase())||(null==(t=e.ticker)?void 0:t.toLowerCase().includes(w.toLowerCase()));return s&&a}),z=(0,r.useMemo)(()=>[...K].sort((e,t)=>{switch(A){case"name":return"asc"===S?e.name.localeCompare(t.name):t.name.localeCompare(e.name);case"type":return"asc"===S?e.type.localeCompare(t.type):t.type.localeCompare(e.type);case"value":let s=e.currentValue||0,a=t.currentValue||0;return"asc"===S?s-a:a-s;case"profit":let r=e.profitLoss||0,l=t.profitLoss||0;return"asc"===S?r-l:l-r;default:return 0}}),[K,A,S]);async function G(s){try{let a=await fetch("/api/investments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw Error("Failed to add investment");let r=await a.json();t([...e,r])}catch(e){throw e}}let $=async()=>{P(!0);try{let e=await fetch("/api/update-prices",{method:"POST"});if(!e.ok)throw Error("Failed to update prices");let s=await e.json();t(s.investments)}catch(e){console.error("Error updating prices:",e)}finally{P(!1)}},J=e=>{D(e),I(!0)},H=async e=>{V(!0),M(e)},Q=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600";return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Investment Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search investments...",value:w,onChange:e=>N(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200"}),(0,a.jsx)(b.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),(0,a.jsx)(l,{}),(0,a.jsxs)("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg",children:[(0,a.jsx)(b.GGD,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Add Investment"})]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Portfolio Value"}),(0,a.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,a.jsx)(b.z8N,{className:"w-5 h-5 text-blue-600"})})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["₹",U.toLocaleString()]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[(0,a.jsx)(b.ARf,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"font-medium",children:"12.5%"}),(0,a.jsx)("span",{className:"ml-2 text-gray-500",children:"vs last month"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Investments"}),(0,a.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,a.jsx)(b.est,{className:"w-5 h-5 text-green-600"})})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:e.length}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Across ",Object.keys(X).length," categories"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Overall P&L"}),(0,a.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,a.jsx)(b.ARf,{className:"w-5 h-5 text-indigo-600"})})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["₹",e.reduce((e,t)=>e+(t.profitLoss||0),0).toLocaleString()]}),(0,a.jsx)("div",{className:"mt-2 flex items-center text-sm",children:(()=>{let t=e.reduce((e,t)=>e+(t.profitLoss||0),0)/e.reduce((e,t)=>e+(t.totalCost||0),0)*100,s=t>0;return(0,a.jsxs)("span",{className:"flex items-center ".concat(s?"text-green-600":"text-red-600"),children:[s?"↑":"↓"," ",Math.abs(t).toFixed(2),"%"]})})()})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Best Performing"}),(0,a.jsx)("div",{className:"p-2 bg-yellow-50 rounded-lg",children:(0,a.jsx)(b.eXT,{className:"w-5 h-5 text-yellow-600"})})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:(()=>{let t=[...e].sort((e,t)=>(t.profitLossPercentage||0)-(e.profitLossPercentage||0))[0];return(null==t?void 0:t.name)||"N/A"})()}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[(0,a.jsx)(b.ARf,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"font-medium",children:(()=>{var t;let s=[...e].sort((e,t)=>(t.profitLossPercentage||0)-(e.profitLossPercentage||0))[0];return s?"".concat(null==(t=s.profitLossPercentage)?void 0:t.toFixed(2),"%"):"N/A"})()})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Portfolio Distribution"}),(0,a.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,a.jsx)(b.eXT,{className:"w-5 h-5 text-blue-600"})})]}),(0,a.jsx)(d.u,{width:"100%",height:300,children:(0,a.jsxs)(c.r,{children:[(0,a.jsx)(x.F,{data:X,dataKey:"value",nameKey:"type",cx:"50%",cy:"50%",outerRadius:100,label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},children:X.map((e,t)=>(0,a.jsx)(m.f,{fill:W[t%W.length]},"cell-".concat(t)))}),(0,a.jsx)(u.m,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Investment Trend"}),(0,a.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,a.jsx)(b.ARf,{className:"w-5 h-5 text-green-600"})})]}),(0,a.jsx)(d.u,{width:"100%",height:300,children:(0,a.jsxs)(h.b,{data:q,children:[(0,a.jsx)(p.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(g.W,{dataKey:"month",stroke:"#6b7280",tick:{fill:"#6b7280"}}),(0,a.jsx)(f.h,{stroke:"#6b7280",tick:{fill:"#6b7280"}}),(0,a.jsx)(u.m,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,a.jsx)(j.N,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2},activeDot:{r:6,fill:"#3b82f6"}})]})})]})]}),(0,a.jsx)(O.A,{children:(0,a.jsx)(B,{})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:_.map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(y===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:e},e))})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:A,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200 text-gray-700",children:[(0,a.jsx)("option",{value:"name",children:"Name"}),(0,a.jsx)("option",{value:"type",children:"Type"}),(0,a.jsx)("option",{value:"value",children:"Value"}),(0,a.jsx)("option",{value:"profit",children:"Profit/Loss"})]}),(0,a.jsxs)("button",{onClick:$,disabled:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg transition-all duration-200 flex items-center space-x-2 ".concat(L?"opacity-50 cursor-not-allowed":"hover:bg-blue-700 shadow-md hover:shadow-lg"),children:[(0,a.jsx)(b.jTZ,{className:"w-5 h-5 ".concat(L?"animate-spin":"")}),(0,a.jsx)("span",{children:L?"Updating...":"Update Prices"})]})]})]}),(0,a.jsx)("div",{className:"mt-8 flex flex-col",children:(0,a.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,a.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P/L"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.ticker&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.ticker})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.type})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.amount}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",e.costBasis.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(e.currentValue||0).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm ".concat(Q(e.profitLoss||0)),children:["$",(e.profitLoss||0).toFixed(2)]}),(0,a.jsxs)("div",{className:"text-xs ".concat(Q(e.profitLossPercentage||0)),children:[(e.profitLossPercentage||0).toFixed(2),"%"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastUpdated?new Date(e.lastUpdated).toLocaleDateString():"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,a.jsx)("button",{onClick:()=>J(e),className:"text-blue-600 hover:text-blue-900 transition-colors duration-150",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>H(e._id),className:"text-red-600 hover:text-red-900 transition-colors duration-150",children:"Delete"})]})]},e._id))})]})})})})})]}),(0,a.jsx)(n,{}),(0,a.jsx)(o,{isOpen:T,onClose:()=>I(!1),onAdd:G})]})]})}},7580:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(5769)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[141,452,636,593,792],()=>t(7580)),_N_E=e.O()}]);